[('Cursor', 'execute', ('select @@version', {}), {}, None),
 ('Cursor', 'description', (), {}, (('', 1, None, None, None, None, None),)),
 ('Cursor',
  'fetchone',
  (),
  {},
  ('Microsoft SQL Server 2017 (RTM-CU25) (KB5003830) - 14.0.3401.7 (X64) \n'
   '\tJun 25 2021 14:02:48 \n'
   '\tCopyright (C) 2017 Microsoft Corporation\n'
   '\tDeveloper Edition (64-bit) on Linux (Ubuntu 16.04.7 LTS)',)),
 ('Cursor', 'close', (), {}, None),
 ('Cursor', 'execute', ('SELECT schema_name()', {}), {}, None),
 ('Cursor', 'description', (), {}, (('', 1, None, None, None, None, None),)),
 ('Cursor', 'fetchone', (), {}, ('dbo',)),
 ('Cursor', 'close', (), {}, None),
 ('Cursor',
  'execute',
  ('\n'
   '                  SELECT CASE transaction_isolation_level\n'
   '                    WHEN 0 THEN NULL\n'
   "                    WHEN 1 THEN 'READ UNCOMMITTED'\n"
   "                    WHEN 2 THEN 'READ COMMITTED'\n"
   "                    WHEN 3 THEN 'REPEATABLE READ'\n"
   "                    WHEN 4 THEN 'SERIALIZABLE'\n"
   "                    WHEN 5 THEN 'SNAPSHOT' END AS "
   'TRANSACTION_ISOLATION_LEVEL\n'
   '                    FROM sys.dm_exec_sessions\n'
   '                    where session_id = @@SPID\n'
   '                  ',),
  {},
  None),
 ('Cursor', 'fetchone', (), {}, ('READ COMMITTED',)),
 ('Cursor', 'close', (), {}, None),
 ('Cursor',
  'execute',
  ("SELECT CAST('test max support' AS NVARCHAR(max))", {}),
  {},
  None),
 ('Cursor', 'description', (), {}, (('', 1, None, None, None, None, None),)),
 ('Cursor', 'fetchone', (), {}, ('test max support',)),
 ('Cursor', 'close', (), {}, None),
 ('Connection', 'rollback', (), {}, None),
 ('Cursor',
  'execute',
  ('\n'
   '            SELECT Patient_ID as patient_id, Admission_Date as date, \n'
   '        REVERSE(\n'
   '            SUBSTRING(\n'
   '                REVERSE(fully_split.Value),\n'
   '                PATINDEX(\n'
   "                    '%[^X]%',\n"
   '                    REVERSE(fully_split.Value)\n'
   '                ),\n'
   "                LEN(fully_split.Value) - PATINDEX('%[^X]%', "
   'REVERSE(fully_split.Value)) + 1\n'
   '            )\n'
   '        )\n'
   "     as code, 'icd10' as system\n"
   '            FROM APCS\n'
   '            -- Our string_split() implementation only works as long as the '
   "codelists do not contain '<', '>' or '&'\n"
   '            -- characters. If that assumption is broken then this will '
   'fail unpredictably.\n'
   '            CROSS APPLY \n'
   '        (\n'
   "            SELECT Value = y.i.value('(./text())[1]', 'nvarchar(4000)')\n"
   '            FROM\n'
   '            (\n'
   '                SELECT x = CONVERT(\n'
   '                    XML,\n'
   "                    '<i>' + REPLACE(Der_Diagnosis_All, ' ||', '</i><i>') + "
   "'</i>'\n"
   "                ).query('.')\n"
   "            ) AS t CROSS APPLY x.nodes('i') AS y(i)\n"
   '        )\n'
   '     pipe_split\n'
   '            CROSS APPLY \n'
   '        (\n'
   "            SELECT Value = y.i.value('(./text())[1]', 'nvarchar(4000)')\n"
   '            FROM\n'
   '            (\n'
   '                SELECT x = CONVERT(\n'
   '                    XML,\n'
   "                    '<i>' + REPLACE(pipe_split.Value, ' ,', '</i><i>') + "
   "'</i>'\n"
   "                ).query('.')\n"
   "            ) AS t CROSS APPLY x.nodes('i') AS y(i)\n"
   '        )\n'
   '     fully_split\n'
   '        ',
   {}),
  {},
  None),
 ('Cursor',
  'description',
  (),
  {},
  (('patient_id', 3, None, None, None, None, None),
   ('date', 2, None, None, None, None, None),
   ('code', 1, None, None, None, None, None),
   ('system', 1, None, None, None, None, None))),
 ('Cursor',
  'fetchone',
  (),
  {},
  (1, datetime.date(2012, 12, 12), 'flim', 'icd10')),
 ('Cursor',
  'fetchone',
  (),
  {},
  (1, datetime.date(2012, 12, 12), 'flam', 'icd10')),
 ('Cursor',
  'fetchone',
  (),
  {},
  (1, datetime.date(2012, 12, 12), 'flum', 'icd10')),
 ('Cursor', 'fetchone', (), {}, None),
 ('Cursor', 'close', (), {}, None),
 ('Connection', 'rollback', (), {}, None)]
